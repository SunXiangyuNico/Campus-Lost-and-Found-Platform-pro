import{u as C,r as D,c as u,o as T,s as w,b as a,e,x as r,z as l,F as N,A as U,j as V,h as B,l as M,m as R,d as i}from"./index-QOScO0--.js";const h={style:{padding:"20px","font-family":"monospace"}},F={style:{background:"#f5f5f5",padding:"15px",margin:"10px 0","border-radius":"5px"}},j={style:{background:"#fff2e8",padding:"15px",margin:"10px 0","border-radius":"5px"}},z={style:{background:"#e8f5e8",padding:"15px",margin:"10px 0","border-radius":"5px"}},A={key:0},O={__name:"Debug",setup(E){const s=C(),d=w(),p=D([]),m=u(()=>!!s.token),k=u(()=>!!s.userInfo),v=u(()=>!!(s.userInfo&&s.userInfo.id)),g=u(()=>s.isLogin),f=u(()=>g.value),y=u(()=>s.token?s.token.substring(0,20)+"...":"无"),b=u(()=>s.userInfo?JSON.stringify(s.userInfo,null,2):"无");function t(o){const n=new Date().toLocaleTimeString();p.value.push(`[${n}] ${o}`)}async function c(){t("开始刷新用户信息...");try{const o=await s.refreshUserInfo();t(`用户信息刷新结果: ${o}`)}catch(o){t(`用户信息刷新失败: ${o.message}`)}}function I(){t("尝试跳转到消息页面..."),d.push("/messages").then(()=>{t("路由跳转成功")}).catch(o=>{t(`路由跳转失败: ${o.message}`)})}function x(){t("检查localStorage...");const o=localStorage.getItem("token");t(`localStorage中的token: ${o?"存在":"不存在"}`),o&&t(`Token值: ${o.substring(0,20)}...`)}return T(()=>{t("诊断页面加载完成"),t(`当前路由: ${d.currentRoute.value.path}`),x()}),(o,n)=>{const S=R("router-link");return i(),a("div",h,[n[12]||(n[12]=e("h1",null,"🔍 登录状态诊断",-1)),e("div",F,[n[6]||(n[6]=e("h3",null,"📊 用户Store状态",-1)),e("p",null,[n[0]||(n[0]=e("strong",null,"Token存在:",-1)),r(" "+l(m.value?"✅ 是":"❌ 否"),1)]),e("p",null,[n[1]||(n[1]=e("strong",null,"Token值:",-1)),r(" "+l(y.value),1)]),e("p",null,[n[2]||(n[2]=e("strong",null,"用户信息存在:",-1)),r(" "+l(k.value?"✅ 是":"❌ 否"),1)]),e("p",null,[n[3]||(n[3]=e("strong",null,"用户信息:",-1)),r(" "+l(b.value),1)]),e("p",null,[n[4]||(n[4]=e("strong",null,"用户ID存在:",-1)),r(" "+l(v.value?"✅ 是":"❌ 否"),1)]),e("p",null,[n[5]||(n[5]=e("strong",null,"isLogin状态:",-1)),r(" "+l(g.value?"✅ 已登录":"❌ 未登录"),1)])]),e("div",{style:{background:"#e8f4fd",padding:"15px",margin:"10px 0","border-radius":"5px"}},[n[7]||(n[7]=e("h3",null,"🔧 操作按钮",-1)),e("button",{onClick:c,style:{margin:"5px",padding:"8px 15px"}},"刷新用户信息"),e("button",{onClick:I,style:{margin:"5px",padding:"8px 15px"}},"测试消息路由"),e("button",{onClick:x,style:{margin:"5px",padding:"8px 15px"}},"检查localStorage")]),e("div",j,[n[8]||(n[8]=e("h3",null,"📝 日志输出",-1)),(i(!0),a(N,null,U(p.value,($,L)=>(i(),a("div",{key:L,style:{margin:"5px 0"}},l($),1))),128))]),e("div",z,[n[11]||(n[11]=e("h3",null,"🎯 消息按钮可见性测试",-1)),e("p",null,[n[9]||(n[9]=e("strong",null,"消息按钮应该显示:",-1)),r(" "+l(f.value?"✅ 是":"❌ 否"),1)]),f.value?(i(),a("div",A,[B(S,{to:"/messages",style:{display:"inline-block",padding:"10px 20px",background:"#007bff",color:"white","text-decoration":"none","border-radius":"5px",margin:"10px 0"}},{default:M(()=>n[10]||(n[10]=[r(" 🔗 测试消息链接 ")])),_:1,__:[10]})])):V("",!0)])])}}};export{O as default};
